---
layout: post
title: "스트림 암호와 XOR 연산"
subtitle: "현대암호"
categories: devlog
tags: security
---

# 스트림 암호(Stream Ciper)
입력되는 요소를 **연속적**으로 처리해 지속적으로 한 번에 한 요소씩 배출하는 방식이다.(데이터를 순차적으로 처리한다.)  

스트림 암호의 대표적인 예시인 일회용 패드(One-Time Pad)는 암호학에서 많이 쓰이는 방식인 XOR 연산(비트 연산)을 기초로 한다.  
<br>

### XOR 연산
---

| a   | b   | a XOR b |
| --- | --- | ------- |
| 0   | 0   | 0       |
| 0   | 1   | 1       |
| 1   | 0   | 1       |
| 1   | 1   | 0       |

비트 단위로 XOR 연산을 하면 위의 표와 같은 결과가 나오는 것을 알 수 있다.  
a에 b를 XOR 연산을 했을 때 다음의 공식이 성립한다.
- a가 0이면 a XOR b = b
- a가 1이면 a XOR b = -b
<br><br>


| a   | b   | a XOR b | a XOR b XOR b |
| --- | --- | ------- | ------------- |
| 0   | 0   | 0       | 0             |
| 0   | 1   | 1       | 0             |
| 1   | 0   | 1       | 1             |
| 1   | 1   | 0       | 1             |
  

$$ A \oplus B \oplus B = A $$
  
또한 a XOR b를 한 결과에 XOR b를 한번 더 하게 되면 다시 a가 된다.
<br><br><br>



### 일회용 패드(One-Time Pad)
---
일회용 패드는 1917년 버냄(G.S.Vernam)에 의해 만들어진 암호화 방식으로 1949년 일회용 패드는 해독이 불가능하다고 수학적으로 증명했다.

일회용 패드는 전사공격을 통해 키 공간을 모두 탐색하더라도 복호할 수 없는 유일한 암호문이다.
- 무조건 안전(unconditionally secure)
- 이론적으로 해독 불가능(theoretically unbreakable)

암호화 방식은 단순하게 `평문과 같은 길이의 랜덤한 비트열(키)을 평문과 XOR 연산`하면 된다.

복호화 연산도 XOR의 특성을 이용해 간단하다.
$$ A \oplus B \oplus B = A $$ 
이므로 `암호문에 키(비트열)를 XOR 연산`하면 다시 평문이 만들어진다.
<br>

#### 일회용 패드가 사용되지 않는 이유
---
아무리 성능이 좋은 컴퓨터가 오더라도 일회용 패드의 해독은 불가능하다.   
설사 올바른 키를 대입해 평문(ABCD)으로 복호화 되었다고 한들, 그것이 평문인지 잘못 해석한(EFGH)것이 구분할 수 없기 때문이다.  

그럼에도 일회용 패드가 사용되지 않는 이유는 `키 배송` 때문이다. 일회용 패드의 키는 **평문과 같은 길이**의 비트열이다. 

키를 암호화하지 않는다면 도청자는 키와 암호문을 가지고 XOR 연산으로 평문을 만들어낼 수 있게된다.

결국 키가 안전하게 전달되도록 암호화할 방식이 필요하다.  
`평문과 같은 길이의 키`를 안전하게 전달할 방식이 있다면 굳이 키에 이용하지 않고, 평문을 바로 암호화하면 된다.

즉 평문은 완벽하게 보호되지만 키를 보호할 수 없고, 키를 보호할 수 있는 방법이 있다면 일회용 패드가 아닌 그 방법을 사용하면 되는 것이다.






